import{H as d,_ as N,j as m,E as T,n as f,i as L,Z as C,f as I,ah as x,o as n,c as B,V as c,P as l,X as P,u as p,O as h,Q as E,W as S,R as b,az as D}from"./@vue-e2c1ea2d.js";import{u as M,b as O}from"./vue-router-fa37f960.js";import{s as v}from"./pinia-f60c2a98.js";import{b as U,u as j,e as w,S as z}from"./index-93fa1ca3.js";import"./vue-demi-71ba0ef2.js";import"./vue-i18n-48ce28a7.js";import"./@intlify-9e8a497c.js";import"./source-map-7d7e1c08.js";import"./vue-2ea97ef2.js";import"./js-cookie-cf83ad76.js";import"./@element-plus-4bcc2357.js";import"./nprogress-8d2808ea.js";import"./axios-707ed124.js";import"./qs-bbfcbdf3.js";import"./side-channel-eafc5c70.js";import"./get-intrinsic-b9397c9a.js";import"./has-symbols-e8f3ca0e.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-9ceb8f5b.js";import"./object-inspect-7b08a46e.js";import"./element-plus-e3be9ac5.js";import"./lodash-es-36eb724a.js";import"./@vueuse-d09f600a.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-6aac7dfa.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-463e90e0.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-11da8395.js";const H={class:"layout-parent"},Q=d({name:"layoutParentView"}),Ne=d({...Q,setup(W){const i=M(),R=O(),_=U(),V=j(),{keepAliveNames:s,cachedViews:u}=v(_),{themeConfig:a}=v(V),e=N({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),g=m(()=>a.value.animation),y=m(()=>a.value.isTagsview?u.value:e.keepAliveNameList),K=m(()=>i.meta.isIframe),A=async()=>{R.getRoutes().forEach(t=>{t.meta.isIframe&&(t.meta.isIframeOpen=!1,t.meta.loading=!0,e.iframeList.push({...t}))})};return T(()=>{e.keepAliveNameList=s.value,w.on("onTagsViewRefreshRouterView",t=>{e.keepAliveNameList=s.value.filter(o=>i.name!==o),e.refreshRouterViewKey="",e.iframeRefreshKey="",f(()=>{e.refreshRouterViewKey=t,e.iframeRefreshKey=t,e.keepAliveNameList=s.value})})}),L(()=>{A(),f(()=>{setTimeout(()=>{if(a.value.isCacheTagsView){let t=z.get("tagsViewList")||[];u.value=t.filter(o=>{var r;return(r=o.meta)==null?void 0:r.isKeepAlive}).map(o=>o.name)}},0)})}),C(()=>{w.off("onTagsViewRefreshRouterView",()=>{})}),I(()=>i.fullPath,()=>{e.refreshRouterViewKey=decodeURI(i.fullPath)},{immediate:!0}),(t,o)=>{const r=x("router-view");return n(),B("div",H,[c(r,null,{default:l(({Component:k})=>[c(P,{name:p(g),mode:"out-in"},{default:l(()=>[(n(),h(D,{include:p(y)},[E((n(),h(b(k),{key:e.refreshRouterViewKey,class:"w100"})),[[S,!p(K)]])],1032,["include"]))]),_:2},1032,["name"])]),_:1})])}}});export{Ne as default};
